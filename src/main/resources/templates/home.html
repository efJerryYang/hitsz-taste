<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <title>Campus Food Delivery Platform</title>
    <meta charset="UTF-8"/>
<!--    <link th:href="@{/home-style.css}" rel="stylesheet" type="text/css">-->
    <style>
        form {
            width: 1000px;
            margin: auto;
        }

        /* Add some spacing between form fields */
        form div {
            margin: 10px 0;
        }

        /* Center the form on the page */
        form, h1 {
            text-align: center;
        }

        table {
            margin: 0 auto;
            text-align: center;
        }

        /* Center the title and description */
        h1, p {
            text-align: center;
        }

        /* Align and set the same size for the input boxes */
        label, input {
            display: inline-block;
            text-align: left;
            margin-right: 10px;
        }

        input[type="text"] {
            width: 400px;
        }

        input[type="submit"] {
            width: auto;
            margin-right: 100px;
            height: auto;
        }

        noscript {
            color: red;
            font-weight: bold;
        }

        #message-container {
            text-align: center;
        }

        .warning {
            color: red;
        }

        .readonly-field {
            background-color: #eee;
        }

        div {
            margin: 10px 0;
            width: 800px;

        }

        div.search-container {
            margin: auto;
            width: 800px;
            text-align: center;
        }

        div.search-container {
            margin: auto;
            width: 800px;
            text-align: center;
        }

    </style>
</head>
<body>
<h1>Welcome to Campus Food Delivery Platform</h1>
<p>Here, you can browse and order food from your favorite cafeterias and merchants on campus.</p>
<script src="/validate.js"></script>
<script src="/sanitize.js"></script>
<script>
    document.getElementById("search-form").addEventListener("submit", function (event) {
        // Get the search query from the form
        const query = document.getElementById("query").value;
        // Sanitize the search query
        const sanitizedQuery = sanitizeSearchQuery(query);
        // Update the form with the sanitized query
        document.getElementById("query").value = sanitizedQuery;
        document.getElementById("jsEnabled").value = "true";
    });
</script>
<!-- Search form -->
<div class="search-container">
    <form name="search-form" th:action="@{/home/search}" method="get">
        <div>
            <label for="query">Search for dishes:</label>
            <input type="text" id="query" name="query" th:value="${query}"
                   placeholder="Enter a dish name or ingredient">
            <button type="submit">Search</button>
        </div>
        <div class="error-container">
            <p style="background-color: yellow;" th:text="${error}">Error message will be placed here</p>
        </div>
        <input type="hidden" id="jsEnabled" name="jsEnabled" value="false"/>
    </form>
</div>


<!-- Filter form -->
<form th:action="@{/home/filter}" method="get">
    <label for="cafeteria">Filter by cafeteria:</label>
    <select id="cafeteria" name="cafeteria">
        <option value="">All cafeterias</option>
        <option th:each="cafeteria : ${cafeterias}" th:value="${cafeteria.cafeteriaId}"
                th:text="${cafeteria.name}"></option>
    </select>
    <label for="merchant">Filter by merchant:</label>
    <select id="merchant" name="merchant">
        <option value="">All merchants</option>
        <option th:each="merchant : ${merchants}" th:value="${merchant.merchantId}"
                th:text="${merchant.name}"></option>
    </select>
    <button type="submit">Filter</button>
</form>
<!-- Dish table -->
<table>
    <tr>
        <th>Dish Name</th>
        <th>Price</th>
        <th>Cafeteria Name</th>
        <th>Merchant Name</th>
    </tr>
    <tr th:each="row : ${filterResult}">
        <td th:text="${row.getDishName()}"></td>
        <td th:text="${row.getPrice()}"></td>
        <td th:text="${row.getCafeteriaName()}"></td>
        <td th:text="${row.getMerchantName()}"></td>
</table>


<!--&lt;!&ndash; Merchant list &ndash;&gt;-->
<!--<h2>Cafeterias and merchants</h2>-->
<!--<ul>-->
<!--    <li th:each="merchant : ${merchants}">-->
<!--        <h3 th:text="${merchant.name}"></h3>-->
<!--        <p th:text="${merchant.description}"></p>-->
<!--        <ul>-->
<!--            <li th:each="dish : ${merchant.dishes}">-->
<!--                <h4 th:text="${dish.name}"></h4>-->
<!--                <p th:text="${dish.description}"></p>-->
<!--                <p>Price: <span th:text="${dish.price}"></span></p>-->
<!--                <form th:action="@{/addToOrder}" method="post">-->
<!--                    <input type="hidden" name="dishId" th:value="${dish.id}">-->
<!--                    <button type="submit">Add to order</button>-->
<!--                </form>-->
<!--            </li>-->
<!--        </ul>-->
<!--    </li>-->
<!--</ul>-->

<!--&lt;!&ndash; Order &ndash;&gt;-->
<!--<h2>Your Order</h2>-->
<!--<table>-->
<!--    <tr>-->
<!--        <th>Dish</th>-->
<!--        <th>Price</th>-->
<!--        <th>Quantity</th>-->
<!--        <th>Total</th>-->
<!--        <th></th>-->
<!--    </tr>-->
<!--    <tr th:each="item : ${order.items}">-->
<!--        <td th:text="${item.dish.name}"></td>-->
<!--        <td th:text="${item.dish.price}"></td>-->
<!--        <td th:text="${item.quantity}"></td>-->
<!--        <td th:text="${item.total}"></td>-->
<!--        <td>-->
<!--            <form th:action="@{/updateOrder}" method="post">-->
<!--                <input type="hidden" name="dishId" th:value="${item.dish.id}">-->
<!--                <button type="submit" name="action" value="increment">+</button>-->
<!--                <button type="submit" name="action" value="decrement">-</button>-->
<!--                <button type="submit" name="action" value="remove">Remove</button>-->
<!--            </form>-->
<!--        </td>-->
<!--    </tr>-->
<!--</table>-->
<!--<p>Total: <span th:text="${order.total}"></span></p>-->
<!--<form th:action="@{/placeOrder}" method="post">-->
<!--    <button type="submit">Place order</button>-->
<!--</form>-->
<noscript>
    <p> Warning: JavaScript is disabled in your browser, your password will not be encrypted before being sent to the
        server.</p>
    <p> To protect your password, make sure that you have an https connection enabled.</p>
</noscript>
</body>
</html>

